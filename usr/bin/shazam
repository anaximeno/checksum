#!/bin/bash

# The idea of this file is to control the commands to perform some action
# depending on the commands, like a pipeline


# App's path
SHAZAM=/usr/lib/shazam/shazam.py


# Some possible command
sum_types=('md5' 'sha1' 'sha224' 'sha256' 'sha384' 'sha512')
unique_opts=('--version' '--help' '-h')
others_opts=('-A' '--all' '-r' '--read')


if [ $# = 0 ]
then
	$SHAZAM
	exit
elif [ $# = 1 ]
then 
	
	for opt in "${unique_opts[@]}"
	do

		if [ "$opt" = "$1" ]
        	then
            		$SHAZAM $opt
            		exit
		fi

    	done

elif [ $# -gt 1 ] 
then
    
	for opt in "${others_opts[@]}"
    	do
        	if [ "$opt" = "$1" ]
		then
            		if [ $# = 2 ]
            		then
                		$SHAZAM $@
			else
				n=$(( $#-1 ))
				echo 'ShaZam: Error:' $opt 'expected 1 argument, but' $n 'was given!'
			fi

			exit
        	fi
    	done

    	for opt in "${sum_types[@]}"
    	do 
        	if [ "$opt" = "$1" ] 
        	then

            		if [ "$2" = "-f" ]
            		then
                		$SHAZAM '--type' $opt '--files' $@

            		elif [ $# = 3 ]
            		then
                		$SHAZAM '--type' $opt '--content' $2 $3

            		else
                		echo 'ShaZam: Error: wrong command, type: shazam --help'
            		fi

			exit
        	fi
    	done
else
	$SHAZAM
fi

# If no option was recognized display help
$SHAZAM

